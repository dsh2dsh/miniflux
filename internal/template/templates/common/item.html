{{ define "item" }}
<article
  class="item entry-item {{ if .user.EntrySwipe }}entry-swipe{{ end }} item-status-{{ .entry.Status }} {{ if .pageEnd }}pageEnd{{ end }}"
  data-id="{{ .entry.ID }}"
  aria-labelledby="entry-title-{{ .entry.ID }}"
  {{ if and .pageEnd .showOnlyUnreadEntries }}
  hx-get="{{ .requestURI }}"
  hx-select=".items > .item"
  hx-swap="afterend"
  hx-trigger="revealed"
  hx-disinherit="*"
  {{ end }}
  tabindex="-1">
    {{ template "item_meta" dict "user" .user "entry" .entry "showOnlyUnreadEntries" .showOnlyUnreadEntries "withInfo" true }}

    <header class="item-header" dir="auto">
        <h2 id="entry-title-{{ .entry.ID }}" class="item-title">
            <a
              href="{{ .entry.URL | safeURL }}"

              {{ if .user.AlwaysOpenExternalLinks }}
              data-original-link="{{ .user.MarkReadOnView }}"
              {{ else }}
              hx-get="{{ route "inlineEntry" "entryID" .entry.ID }}"
              hx-indicator="closest .item"
              hx-swap="outerHTML"
              hx-target="next .entry-content.htmx-indicator"
              hx-trigger="click"
              {{ end }}

              {{ .user.TargetBlank }}
              rel="noopener noreferrer"
              referrerpolicy="no-referrer">
                {{ .entry.AutoTitle | safeHTML }}
            </a>
        </h2>

        <span class="category {{ if .entry.Feed.Category.HiddenLabel }}hideLabel{{ end }}">
            <a
              href="{{ route "categoryEntries" "categoryID" .entry.Feed.Category.ID }}"
              aria-label="{{ t "page.category_label" .entry.Feed.Category.Title }}">
                {{ .entry.Feed.Category.Title }}
            </a>
        </span>
    </header>

    {{ template "item_meta" dict "user" .user "entry" .entry "hasSaveEntry" .hasSaveEntry "withIcons" true }}
</article>
{{ end }}
